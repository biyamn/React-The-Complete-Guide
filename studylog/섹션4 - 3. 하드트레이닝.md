
>💡 **하드트레이닝이란?** 강의를 보지 않고 기존 지식과 검색만으로 코딩해보면서 연습해보는 것


섹션 4 마지막에 form과 데이터 전달을 배웠는데 이 개념이 아직 생소하고.. 또 어려워서 하드트레이닝을 해보기로 했다. 강의에서 만든 기능을 연습해보자. 이해가 될 때까지 해볼 것이다,,

# 연습할 것

- form 만들기 ✅
- 컴포넌트 분리하기 ✅
- form에서 사용자 입력 받아 전송하기 ✅
- form에서 전송하면 입력값 초기화되게 하기 ✅
- 하위 컴포넌트에 있는 form에서 받은 정보를 상위 컴포넌트로 전달하고 다시 다른 하위 컴포넌트로 내리기 ✅
    - 1단계 ✅ 
    - 2단계 ✅
    - 3단계 ✅

일단 이렇게 연습해보고 과제를 시작하면 좋을 것 같다!

# form 만들기

일단 이렇게 만들어봤다.

![캡처](https://user-images.githubusercontent.com/101965666/215852544-a3dddc90-727d-4944-83e2-fd205dd69754.PNG)


```jsx
import './App.css';

function App() {
  return (
    <div>
      <div className='container-red'>
        <div className='container-purple'>
          <h1>개인정보 입력 폼</h1>
          <div className='container-green'>
            <input type='text' placeholder='이름을 입력하세요'></input>
            <input type='number' placeholder='나이를 입력하세요'></input>
            <input type='date'></input>
            <button type='submit'>전송</button>
          </div>
        </div>
        <div className='container-blue'>
          <h1>기입한 정보가 정확한지 확인하세요</h1>
        </div>
      </div>
    </div>
  );
}

export default App;
```

```jsx
.container-red {
  display: flex;
  flex-direction: column;
  margin: 50px;
  padding: 30px;
  border: 1px solid red;
  height: 500px
}

.container-purple {
  padding: 10px;
  border: 1px solid purple;
  margin: 10px;
  flex: 1;
}

.container-green {
  border: 1px solid green;
  padding: 20px;
}

.container-blue {
  padding: 10px;
  border: 1px solid blue;
  margin: 10px;
  flex: 2;
}
```

💥 하지만 처음에는 form과 container3의 비율이 1:2으로 맞춰지지 않고 1:1로 보여졌다. 그래서 시행착오를 겪었는데.. 결론은 외부에 있는 container1의 높이가 충분히 크지 않았기 때문이다. 그래서 height를 줘서 맞췄다.

# 컴포넌트 분리하기

App 컴포넌트를 Blue, Green, Purple 컴포넌트로 나누는 데에 성공했다.

# form에서 사용자 입력 받아 전송하기

전송 버튼을 누르면 콘솔에 입력한 데이터를 출력하는 것에 성공했다.

```jsx
import React, { useState } from 'react';

const Green = () => {
  const [name, setName] = useState('');
  const [age, setAge] = useState('');
  const [date, setDate] = useState('');

  const handleChangeName = e => setName(e.target.value);
  const handleChangeAge = e => setAge(e.target.value);
  const handleChangeDate = e => setDate(e.target.value);

  const handleSubmit = e => {
    e.preventDefault();
    
    const data = {
      name: e.target[0].value,
      age: e.target[1].value,
      date: e.target[2].value,
    }

    console.log(data);
  }

  return (
    <form onSubmit={handleSubmit} className='container-green'>
      <input type='text' value={name} onChange={handleChangeName} placeholder='이름을 입력하세요'></input>
      <input type='number' value={age} onChange={handleChangeAge} placeholder='나이를 입력하세요'></input>
      <input type='date' value={date} onChange={handleChangeDate}></input>
      <button type='submit'>전송</button>
    </form>
  );
};

export default Green;
```

# form에서 전송하면 입력값 초기화되게 하기

전송 버튼을 누르면 입력창 안에 있는 데이터의 값을 초기화하는데 성공했다.

그런데…이렇게 인덱스로 가져오는게 분명 아닌 것 같은데..일단 되니까 놔두기로 했다 이따가 다 끝나고 이전 코드랑 비교해보기로 하자.

```jsx
const handleSubmit = e => {
    e.preventDefault();
    
    const data = {
      name: e.target[0].value,
      age: e.target[1].value,
      date: e.target[2].value,
    }

    console.log(data);

    setName('');
    setAge('');
    setDate('');
  }
```

# 하위 컴포넌트에 있는 form에서 받은 정보를 상위 컴포넌트로 전달하기

**Green.js에서 출력되는 `data`를 상위 컴포넌트인 Purple로 올리고, 또 그 상위 단계인 App으로 올린 후 Green과 함께 App의 하위 컴포넌트인 Blue로 내려서 Blue.js에서 `data`를 출력해볼 것이다.**

### 💥 문제가 생겼다

일단 `data`를 App.js까지 전달하는 것은 성공했다! 하지만 data가 함수 안에 있어서.. 그걸 return문에서 써야 하는데 어떻게 해야 할 지 모르겠다.

그래서 일단 함수 밖에서 data를 선언하고 그걸 함수 안에서 바꿔줬다. 하지만 그렇게 되지 않는 것 같다. 첫번째, 세번째 콘솔에서 data가 undefined로 나온다. 즉 외부에 선언된 변수와 함수 안에 있는 변수명이 동일해도 그렇게 여겨지지 않는 것 같다.

```jsx
// App.js

function App() {
  let data;
  console.log(data);

  const dataFromPurple = (parameter) => {
    data = parameter;
    console.log(data);
  }

  console.log(data);

  return (
    <div className='container-red'>
      <Purple dataFromPurple={dataFromPurple}/>
      <Blue data={data} />
    </div>
  );
}
```

```jsx
// 콘솔

1:  undefined
3:  undefined
2:  {name: '2', age: '2', date: '2023-02-09'}
```

→ 일단 이 문제는 일반 변수가 아닌 state를 사용하는 것으로 해결할 수 있었다.

```jsx
function App() {
  const [data, setData] = useState('');

  const dataFromPurple = (parameter) => {
    setData(parameter);
  }

  return (
    <div className='container-red'>
      <Purple dataFromPurple={dataFromPurple}/>
      <Blue data={data} />
    </div>
  );
}

export default App;
```

# 완성!!

![1](https://user-images.githubusercontent.com/101965666/215999465-b879d0ef-e749-4f64-aa4f-111a817d4679.PNG)
![2](https://user-images.githubusercontent.com/101965666/215999474-2d16e097-d4f0-4aae-b49c-7193e2a17e0c.PNG)


# 강의 정리본과 비교해보기

### 입력받은 데이터를 모아서 객체를 만드는 부분

일단 이부분은.. 아까도 굉장히 이상했고 다른 방법이 있을 거라고 생각했는데 떠올리지 못했다! useState로 state를 선언하여 변수를 만들었는데 그걸 안쓰고 왜 `e.target.value`를 썼는지 모르겠다😂

```jsx
// 내 거
const data = {
  name: e.target[0].value,
  age: e.target[1].value,
  date: e.target[2].value,
}
```

```jsx
// 강의
const data = {
  name: name,
  age: age,
  date: date,
}
```

### 함수 네이밍 부분

일단 나는 입력창에서 onChange를 했을 때 실행되는 함수를 `handleChangeName`로 지었는데, 강의에서는 `titleChangeHandler`라고 지었다. 

그리고  그 외에도 어떻게 지어야할지 몰라 편한대로 지었는데 강의에서는 `addExpenseHandler`, `onAddExpense`, `saveExpenseDataHandler` 등 의미가 있는 함수명을 사용하고 있었다. 